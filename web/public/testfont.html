<!DOCTYPE html>
<html>
  <head>

    <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>

    <meta charset="utf-8" />

  </head>
  <body>
    <canvas id="canvas" width="800" height="400"></canvas>
    <canvas id="canvas2" width="800" height="400">  </canvas>
    <script src="fonts/sketch.js"></script>
    <script>
        var f = opentype.load('fonts/Popcorn_Mountain--Standard.otf', function(err, f) {
            if (err) {
            alert('Font could not be loaded: ' + err);
            } else {
            var ctx = document.getElementById('canvas').getContext('2d');
            var fontSize = 72;
            var text = 'Hello, World!';
            ctx.font = fontSize + 'px ' + f.names.fullName.en;
            ctx.fillText(text, 10, 350 + fontSize);
                setup(f, ctx);            
            }
        });


      function buildFont(){
                // this .notdef glyph is required.
        const notdefGlyph = new opentype.Glyph({
            name: '.notdef',
            advanceWidth: 650,
            path: new opentype.Path()
        });

        const aPath = new opentype.Path();
        aPath.moveTo(100, 0);
        aPath.lineTo(100, 700);
        // more drawing instructions...
        const aGlyph = new opentype.Glyph({
            name: 'A',
            unicode: 65,
            advanceWidth: 650,
            path: aPath
        });

        const font = new opentype.Font({
            familyName: 'OpenTypeSans',
            styleName: 'Medium',
            unitsPerEm: 1000,
            ascender: 800,
            descender: -200,
            glyphs: [notdefGlyph, aGlyph]});

        return font;
      }

      function useFont(font, ctx){
        font.draw(
            ctx,
            'A', // Text to render
            100, // X position
            200, // Y position
            100, // Font size
            {
                kerning: true // Take kerning into account when rendering font
            } // Options
        );        
      }

      var f = buildFont();

      var ctx = document.getElementById('canvas2').getContext('2d');
      useFont(f, ctx);
    </script>
  </body>
</html>
