<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Config me</title>

  <script type="text/javascript" src="config.js"></script>
  <!-- <script type="module" src="configm.js"></script> -->

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- code editor -->
    <script src="js/codeeditor/codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" href="js/codeeditor/codemirror/lib/codemirror.css">
    <script src="js/codeeditor/codemirror/mode/javascript/javascript.js"></script>
    <script src="js/codeeditor/codemirror/mode/python/python.js"></script>
    <script src="js/codeeditor/codemirror/mode/shell/shell.js"></script>
    <script src="js/codeeditor/codemirror/mode/htmlmixed/htmlmixed.js"></script>

</head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RXPM3QHNJ3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-RXPM3QHNJ3');
    </script>
    
<body>
    <button id="saveconfig" > Save Config </button>
    <button id="loadconfig" > Load Config </button>
    <button id="resetconfig" > Reset Config </button>

    <div class="cm-editor" id="edit_code" style="height:430px">

    <script>
var myCodeMirror = null;
var gitcurrentcontents = "";
var gitcurrentcontentstype = "javascript";

    if (myCodeMirror == null){
        myCodeMirror = CodeMirror(document.getElementById("edit_code"), {
            value: gitcurrentcontents,
            mode:  gitcurrentcontentstype, 
            lineNumbers: true
        });
        myCodeMirror.setSize(null, 430);
    }
    try{
        var cfg = loadUserConfig();
        myCodeMirror.getDoc().setValue(cfg);
    } catch (e) {
        console.log(e);
    }

    $("#saveconfig").click(function(){
        var cfg = myCodeMirror.getDoc().getValue();
        saveUserConfig(cfg);

    });     
    $("#loadconfig").click(function(){
        var cfg = loadUserConfig();
        myCodeMirror.getDoc().setValue(cfg);

    });     

    $("#resetconfig").click(function(){
        var cfg = getConfig();
        myCodeMirror.getDoc().setValue(JSON.stringify(cfg));

    });
    </script>
</body>

</html>


